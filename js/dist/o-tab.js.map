{"version":3,"sources":["../src/o-tab.js"],"names":["Otab","NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","$","fn","DEFAULT_THRESHOLD","Event","CLICK_DATA_API","ClassName","ACTIVE","SHOW","ACCORDION_LAYOUT","Selector","OTAB_HEADING","OTAB_CONTENT","element","_element","_addAccessibility","parent","find","length","addClass","show","$element","next","hasClass","removeClass","attr","$tab","$tabpanel","Util","getUID","role","tabindex","_jQueryInterface","config","each","$this","data","test","Error","document","on","call","event","preventDefault","Constructor","noConflict"],"mappings":"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","file":"o-tab.js","sourcesContent":["import $ from 'jquery'\nimport Util from './util'\n\n/**\n * ------------------------------------------------------------------------------------------------------\n * Boosted (v4.0.0-beta.3): otab.js\n * Licensed under MIT (https://github.com/Orange-OpenSource/Orange-Boosted-Bootstrap/blob/master/LICENSE)\n * ------------------------------------------------------------------------------------------------------\n */\n\nconst Otab = (() => {\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME                = 'otab'\n  const VERSION             = '4.0.0-beta.3'\n  const DATA_KEY            = 'bs.otab'\n  const EVENT_KEY           = `.${DATA_KEY}`\n  const DATA_API_KEY        = '.data-api'\n  const JQUERY_NO_CONFLICT  = $.fn[NAME]\n  const DEFAULT_THRESHOLD   = 2\n\n  const Event = {\n    CLICK_DATA_API : `click${EVENT_KEY}${DATA_API_KEY}`\n  }\n\n  const ClassName = {\n    ACTIVE        : 'active',\n    SHOW          : 'show',\n    ACCORDION_LAYOUT: 'accordion-layout'\n  }\n\n  const Selector = {\n    OTAB_HEADING: '.o-tab-heading',\n    OTAB_CONTENT: '.o-tab-content'\n  }\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class Otab {\n\n    constructor(element) {\n      this._element = element\n      this._addAccessibility()\n\n      if ($(this._element).parent().find(Selector.OTAB_HEADING).length > DEFAULT_THRESHOLD) {\n        $(this._element).parent().addClass(ClassName.ACCORDION_LAYOUT)\n      }\n    }\n\n\n    // getters\n\n    static get VERSION() {\n      return VERSION\n    }\n\n\n    // public\n    show() {\n      const $element = $(this._element)\n\n      if ($element.next().hasClass(ClassName.SHOW)) {\n        return\n      }\n\n      // from parent remove all tab-content show classes\n      $element.parent().find(Selector.OTAB_CONTENT).removeClass(ClassName.SHOW)\n      // remove all aria-expanded=true\n      $element.parent().find('[aria-expanded=\"true\"]').attr('aria-expanded', false)\n      // add show class to next tab-content\n      $element.next().addClass(ClassName.SHOW)\n      // add aria-expanded=true to element\n      $element.attr('aria-expanded', true)\n    }\n\n    // private\n    _addAccessibility() {\n      const $tab = $(this._element)\n      const $tabpanel = $tab.next()\n\n      $tab.attr('id', Util.getUID(NAME))\n      $tabpanel.attr('id', Util.getUID(NAME))\n\n      $tab.attr({\n        'aria-controls': $tabpanel.attr('id'),\n        role: 'tab'\n      })\n      $tabpanel.attr({\n        'aria-labelledby': $tab.attr('id'),\n        role: 'tabpanel',\n        tabindex: 0\n      })\n\n      if ($tabpanel.hasClass(ClassName.SHOW)) {\n        $tab.attr('aria-expanded', true)\n      } else {\n        $tab.attr('aria-expanded', false)\n      }\n    }\n\n    // static\n\n    static _jQueryInterface(config) {\n      return this.each(function () {\n        const $this = $(this)\n        let data    = $this.data(DATA_KEY)\n\n        if (!data) {\n          data = new Otab(this)\n          $this.data(DATA_KEY, data)\n        }\n\n        // Boosted mod\n        if (/init/.test(config)) {\n          return\n        }\n        // end mod\n\n        if (typeof config === 'string') {\n          if (typeof data[config] === 'undefined') {\n            throw new Error(`No method named \"${config}\"`)\n          }\n          data[config]()\n        }\n      })\n    }\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * Data Api implementation\n   * ------------------------------------------------------------------------\n   */\n\n  $(document)\n    .on('DOMContentLoaded', () => {\n      Otab._jQueryInterface.call($(Selector.OTAB_HEADING), 'init')\n    })\n    .on(Event.CLICK_DATA_API, Selector.OTAB_HEADING, function (event) {\n      event.preventDefault()\n      Otab._jQueryInterface.call($(this), ClassName.SHOW)\n    })\n\n  /**\n   * ------------------------------------------------------------------------\n   * jQuery\n   * ------------------------------------------------------------------------\n   */\n\n  $.fn[NAME]             = Otab._jQueryInterface\n  $.fn[NAME].Constructor = Otab\n  $.fn[NAME].noConflict  = function () {\n    $.fn[NAME] = JQUERY_NO_CONFLICT\n    return Otab._jQueryInterface\n  }\n\n  return Otab\n\n})($)\n\nexport default Otab\n"]}