{"version":3,"sources":["../src/o-navbar.js"],"names":["Navbar","$","NAME","VERSION","DATA_KEY","JQUERY_NO_CONFLICT","fn","SCROLLTIMEOUT","Default","sticky","trigger","DefaultType","Dimension","MEDIA_BP_SM","Event","PAGE_SCROLL","Selector","CONFORTP_BAR","SUPRA_BAR","MEGAMENU_PANEL","element","config","_element","_supraBar","find","_config","_getConfig","_initialHeight","outerHeight","_initialSupraHeight","_triggerElm","_throttleTimer","_addAria","addClass","document","body","css","_addEventListeners","extend","Util","typeCheckConfig","_isElementInViewport","el","topOffset","rect","getBoundingClientRect","bottom","right","left","window","innerWidth","documentElement","clientWidth","top","innerHeight","clientHeight","_scrollHandler","clearTimeout","setTimeout","_managePageScroll","bind","show","hide","addEventListener","attr","_jQueryInterface","each","$this","data","undefined","Error","Constructor","noConflict","jQuery"],"mappings":"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","file":"o-navbar.js","sourcesContent":["import Util from './util'\n\n\n/**\n * --------------------------------------------------------------------------\n * Boosted (v4.0.0-alpha.4): o-navbar.js\n * Licensed under MIT (https://github.com/Orange-OpenSource/Orange-Boosted-Bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nconst Navbar = (($) => {\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME                = 'navbar'\n  const VERSION             = '4.0.0-alpha.4'\n  const DATA_KEY            = 'bs.navbar'\n  const JQUERY_NO_CONFLICT  = $.fn[NAME]\n  // boosted mod\n  const SCROLLTIMEOUT       = 100\n  // end mod\n\n  const Default = {\n    sticky : false,\n    trigger : ''\n  }\n\n  const DefaultType = {\n    sticky : 'boolean',\n    trigger : 'string'\n  }\n\n  const Dimension = {\n    MEDIA_BP_SM : 544\n  }\n\n  const Event = {\n    PAGE_SCROLL : 'scroll'\n  }\n\n  const Selector = {\n    CONFORTP_BAR : '#accessibilitytoolbarGraphic',\n    SUPRA_BAR : '.navbar.supra',\n    MEGAMENU_PANEL : '.mega-menu.panel'\n  }\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class Navbar {\n\n    constructor(element, config) {\n      this._element         = element\n      this._supraBar        = $(element).find(Selector.SUPRA_BAR)\n      this._config          = this._getConfig(config)\n      this._initialHeight = $(this._element).outerHeight()\n      this._initialSupraHeight = $(this._supraBar).outerHeight()\n      this._triggerElm = $(this._config.trigger)[0]\n      this._throttleTimer = 0\n\n      this._addAria()\n\n      if (this._config.sticky) {\n        $(this._element).addClass('fixed-header')\n        $(Selector.MEGAMENU_PANEL).addClass('sticky')\n        $(document.body).css('padding-top', this._initialHeight)\n        this._addEventListeners()\n      }\n    }\n\n    // getters\n\n    static get VERSION() {\n      return VERSION\n    }\n\n    static get Default() {\n      return Default\n    }\n\n    // private\n\n    _getConfig(config) {\n      config = $.extend({}, Default, config)\n      Util.typeCheckConfig(NAME, config, DefaultType)\n      return config\n    }\n\n    _isElementInViewport (el, topOffset) {\n      let rect = el.getBoundingClientRect()\n\n      if (!topOffset) {\n        topOffset = 0\n      }\n\n      return rect.bottom > topOffset &&\n        rect.right > 0 &&\n        rect.left < (window.innerWidth || document.documentElement.clientWidth) &&\n        rect.top < (window.innerHeight || document.documentElement.clientHeight)\n    }\n\n    _scrollHandler() {\n      if (this._throttleTimer) {\n        window.clearTimeout(this._throttleTimer)\n      }\n\n      this._throttleTimer = window.setTimeout(this._managePageScroll.bind(this), SCROLLTIMEOUT)\n    }\n\n    _managePageScroll() {\n      if (this._isElementInViewport(this._triggerElm, 0)) {\n        $(Selector.SUPRA_BAR).show()\n        $(document.body).css('padding-top', this._initialHeight)\n      } else {\n        $(Selector.SUPRA_BAR).hide()\n        $(document.body).css('padding-top', this._initialHeight - this._initialSupraHeight)\n      }\n    }\n\n    _addEventListeners() {\n      if (window.innerWidth >= Dimension.MEDIA_BP_SM) {\n        window.addEventListener(Event.PAGE_SCROLL, this._scrollHandler.bind(this))\n      }\n    }\n\n    _addAria() {\n      $(this._element).find('.navbar .nav-link[data-toggle]').attr('aria-haspopup', true)\n    }\n\n    // static\n\n    static _jQueryInterface(config) {\n      return this.each(function () {\n        let $this   = $(this)\n        let data    = $this.data(DATA_KEY)\n        let _config = $.extend(\n          {},\n          Default,\n          $this.data(),\n          typeof config === 'object' && config\n        )\n\n        if (!data) {\n          data = new Navbar(this, _config)\n          $this.data(DATA_KEY, data)\n        }\n\n        if (typeof config === 'string') {\n          if (data[config] === undefined) {\n            throw new Error(`No method named \"${config}\"`)\n          }\n          data[config]()\n        }\n      })\n    }\n\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * jQuery\n   * ------------------------------------------------------------------------\n   */\n\n  $.fn[NAME]             = Navbar._jQueryInterface\n  $.fn[NAME].Constructor = Navbar\n  $.fn[NAME].noConflict  = function () {\n    $.fn[NAME] = JQUERY_NO_CONFLICT\n    return Navbar._jQueryInterface\n  }\n\n  return Navbar\n\n})(jQuery)\n\nexport default Navbar\n"]}