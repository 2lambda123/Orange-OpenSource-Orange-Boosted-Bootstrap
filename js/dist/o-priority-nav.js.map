{"version":3,"sources":["../src/o-priority-nav.js"],"names":["PriorityNav","$","NAME","VERSION","DATA_KEY","JQUERY_NO_CONFLICT","fn","RESIZE_DURATION","Event","RESIZE","FOCUS","ClassName","PRIORITY","HIDE","Selector","NAV_ELEMENTS","FIRST_ELEMENT","PRIORITY_ELEMENT","element","config","_element","_config","is","_$menu","find","first","_$allNavElements","_bindUIActions","_setupMenu","$allNavElements","firstPos","position","$wrappedElements","each","i","$elm","pos","top","add","eq","length","newSet","clone","addClass","attr","append","css","$item","prev","$itemDuplicate","prepend","_tearDown","empty","removeClass","window","on","setTimeout","e","target","dropdown","_jQueryInterface","$element","data","test","Error","Constructor","noConflict","jQuery"],"mappings":"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","file":"o-priority-nav.js","sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Boosted (v4.0.0-alpha.6.1): o-priority-nav.js\n * Licensed under MIT (https://github.com/Orange-OpenSource/Orange-Boosted-Bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nconst PriorityNav = (($) => {\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME = 'prioritynav'\n  const VERSION = '4.0.0-alpha.6.1'\n  const DATA_KEY = 'bs.prioritynav'\n  const JQUERY_NO_CONFLICT = $.fn[NAME]\n  const RESIZE_DURATION = 500\n\n  const Event = {\n    RESIZE: 'resize',\n    FOCUS: 'focus'\n  }\n\n  const ClassName = {\n    PRIORITY: 'priority',\n    HIDE: 'sr-only'\n  }\n\n  const Selector = {\n    NAV_ELEMENTS: 'li:not(\\'.overflow-nav\\')',\n    FIRST_ELEMENT: 'li:first',\n    PRIORITY_ELEMENT: '.priority'\n  }\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class PriorityNav {\n\n    constructor(element, config) {\n      this._element = element\n      this._config = config\n\n      if ($(element).is('ul')) {\n        this._$menu = $(element)\n      } else {\n        this._$menu = $(element).find('ul').first()\n      }\n      this._$allNavElements = this._$menu.find(Selector.NAV_ELEMENTS)\n      this._bindUIActions()\n      this._setupMenu()\n    }\n\n    // getters\n\n    static get VERSION() {\n      return VERSION\n    }\n\n    // public\n\n    // private\n\n    _setupMenu() {\n      const $allNavElements = this._$allNavElements\n\n      // Checking top position of first item (sometimes changes)\n      const firstPos = this._$menu.find(Selector.FIRST_ELEMENT).position()\n\n      // Empty collection in which to put menu items to move\n      let $wrappedElements = $()\n\n      // Used to snag the previous menu item in addition to ones that have wrapped\n      let first = true\n\n      // Loop through all the nav items...\n      this._$allNavElements.each(function (i) {\n        const $elm = $(this)\n\n        // ...in which to find wrapped elements\n        const pos = $elm.position()\n\n        if (pos.top !== firstPos.top) {\n\n          // If element is wrapped, add it to set\n          $wrappedElements = $wrappedElements.add($elm)\n\n          // Add the previous one too, if first\n          if (first) {\n            $wrappedElements = $wrappedElements.add($allNavElements.eq(i - 1))\n            first = false\n          }\n        }\n      })\n\n      if ($wrappedElements.length) {\n\n        // Clone set before altering\n        const newSet = $wrappedElements.clone()\n\n        // Hide ones that we're moving\n        $wrappedElements.addClass(ClassName.HIDE)\n        $wrappedElements.find('.nav-link').attr('tabindex', -1)\n\n        // Add wrapped elements to dropdown\n        this._$menu.find('.overflow-nav-list').append(newSet)\n\n        // Show new menu\n        this._$menu.find('.overflow-nav').addClass('show-inline-block')\n\n        // Make overflow visible again so dropdown can be seen.\n        this._$menu.find('.o-nav-local').css('overflow', 'visible')\n\n        // Check if menu doesn't overflow after process\n        if (this._$menu.find('.overflow-nav').position().top !== firstPos.top) {\n          const $item = $(this._element).find(`.${ClassName.HIDE}`).first().prev()\n          const $itemDuplicate = $item.clone()\n\n          $item.addClass(ClassName.HIDE)\n          $item.find('.nav-link').attr('tabindex', -1)\n\n          this._$menu.find('.overflow-nav-list').prepend($itemDuplicate)\n        }\n      }\n\n      // hide menu from AT\n      this._$menu.find('.overflow-nav').attr('aria-hidden', true)\n\n    }\n\n    _tearDown() {\n      this._$menu.find('.overflow-nav-list').empty()\n      this._$menu.find('.overflow-nav').removeClass('show-inline-block')\n      this._$allNavElements.removeClass(ClassName.HIDE)\n      this._$allNavElements.find('.nav-link').attr('tabindex', 0)\n    }\n\n    _bindUIActions() {\n      $(window).on(Event.RESIZE, () => {\n        this._$menu.addClass('resizing')\n\n        setTimeout(() => {\n          this._tearDown()\n          this._setupMenu()\n          this._$menu.removeClass('resizing')\n        }, RESIZE_DURATION)\n      })\n\n      this._$menu.find('.overflow-nav .dropdown-toggle').on(Event.FOCUS, (e) => {\n        $(e.target).dropdown('toggle')\n      })\n    }\n\n    // static\n\n    static _jQueryInterface(config) {\n      return this.each(function () {\n        const $element = $(this)\n\n        let data       = $element.data(DATA_KEY)\n\n        if (!data) {\n          data = new PriorityNav(this, config)\n          $element.data(DATA_KEY, data)\n        }\n\n        if (typeof config !== 'undefined' && config) {\n          if (typeof config !== 'string' || !/^[.#].*/.test(config)) {\n            throw new Error(`Selector \"${config}\" is not supported`)\n          }\n        }\n      })\n    }\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * jQuery\n   * ------------------------------------------------------------------------\n   */\n\n  $.fn[NAME]             = PriorityNav._jQueryInterface\n  $.fn[NAME].Constructor = PriorityNav\n  $.fn[NAME].noConflict  = function () {\n    $.fn[NAME] = JQUERY_NO_CONFLICT\n    return PriorityNav._jQueryInterface\n  }\n\n  return PriorityNav\n\n})(jQuery)\n\nexport default PriorityNav\n"]}