{"version":3,"file":"otab.js","sources":["../src/o-tab.js"],"sourcesContent":["import $ from 'jquery'\nimport Util from './util'\n\n/**\n * ------------------------------------------------------------------------------------------------------\n * Boosted (v4.1.3): otab.js\n * Licensed under MIT (https://github.com/Orange-OpenSource/Orange-Boosted-Bootstrap/blob/master/LICENSE)\n * ------------------------------------------------------------------------------------------------------\n */\n\nconst Otab = (($) => {\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME                = 'otab'\n  const VERSION             = '4.1.3'\n  const DATA_KEY            = 'bs.otab'\n  const EVENT_KEY           = `.${DATA_KEY}`\n  const DATA_API_KEY        = '.data-api'\n  const JQUERY_NO_CONFLICT  = $.fn[NAME]\n  const DEFAULT_THRESHOLD   = 2\n\n  const Event = {\n    CLICK_DATA_API : `click${EVENT_KEY}${DATA_API_KEY}`\n  }\n\n  const ClassName = {\n    ACTIVE        : 'active',\n    SHOW          : 'show',\n    ACCORDION_LAYOUT: 'accordion-layout'\n  }\n\n  const Selector = {\n    OTAB_HEADING: '.o-tab-heading',\n    OTAB_CONTENT: '.o-tab-content'\n  }\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class Otab {\n    constructor(element) {\n      this._element = element\n      this._addAccessibility()\n\n      if ($(this._element).parent().find(Selector.OTAB_HEADING).length > DEFAULT_THRESHOLD) {\n        $(this._element).parent().addClass(ClassName.ACCORDION_LAYOUT)\n      }\n    }\n\n\n    // getters\n\n    static get VERSION() {\n      return VERSION\n    }\n\n\n    // public\n    show() {\n      const $element = $(this._element)\n\n      if ($element.next().hasClass(ClassName.SHOW)) {\n        return\n      }\n\n      // from parent remove all tab-content show classes\n      $element.parent().find(Selector.OTAB_CONTENT).removeClass(ClassName.SHOW)\n      // remove all aria-expanded=true\n      $element.parent().find('[aria-expanded=\"true\"]').attr('aria-expanded', false)\n      // add show class to next tab-content\n      $element.next().addClass(ClassName.SHOW)\n      // add aria-expanded=true to element\n      $element.attr('aria-expanded', true)\n    }\n\n    // private\n    _addAccessibility() {\n      const $tab = $(this._element)\n      const $tabpanel = $tab.next()\n\n      $tab.attr('id', Util.getUID(NAME))\n      $tabpanel.attr('id', Util.getUID(NAME))\n\n      $tab.attr({\n        'aria-controls': $tabpanel.attr('id'),\n        role: 'tab'\n      })\n      $tabpanel.attr({\n        'aria-labelledby': $tab.attr('id'),\n        role: 'tabpanel',\n        tabindex: 0\n      })\n\n      if ($tabpanel.hasClass(ClassName.SHOW)) {\n        $tab.attr('aria-expanded', true)\n      } else {\n        $tab.attr('aria-expanded', false)\n      }\n    }\n\n    // static\n\n    static _jQueryInterface(config) {\n      return this.each(function () {\n        const $this = $(this)\n        let data    = $this.data(DATA_KEY)\n\n        if (!data) {\n          data = new Otab(this)\n          $this.data(DATA_KEY, data)\n        }\n\n        // Boosted mod\n        if (/init/.test(config)) {\n          return\n        }\n        // end mod\n\n        if (typeof config === 'string') {\n          if (typeof data[config] === 'undefined') {\n            throw new TypeError(`No method named \"${config}\"`)\n          }\n          data[config]()\n        }\n      })\n    }\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * Data Api implementation\n   * ------------------------------------------------------------------------\n   */\n\n  $(document)\n    .on('DOMContentLoaded', () => {\n      Otab._jQueryInterface.call($(Selector.OTAB_HEADING), 'init')\n    })\n    .on(Event.CLICK_DATA_API, Selector.OTAB_HEADING, function (event) {\n      event.preventDefault()\n      Otab._jQueryInterface.call($(this), ClassName.SHOW)\n    })\n\n  /**\n   * ------------------------------------------------------------------------\n   * jQuery\n   * ------------------------------------------------------------------------\n   */\n\n  $.fn[NAME]             = Otab._jQueryInterface\n  $.fn[NAME].Constructor = Otab\n  $.fn[NAME].noConflict  = function () {\n    $.fn[NAME] = JQUERY_NO_CONFLICT\n    return Otab._jQueryInterface\n  }\n\n  return Otab\n})($)\n\nexport default Otab\n"],"names":["Otab","$","NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","fn","DEFAULT_THRESHOLD","Event","CLICK_DATA_API","ClassName","ACTIVE","SHOW","ACCORDION_LAYOUT","Selector","OTAB_HEADING","OTAB_CONTENT","element","_element","_addAccessibility","parent","find","length","addClass","show","$element","next","hasClass","removeClass","attr","$tab","$tabpanel","Util","getUID","role","tabindex","_jQueryInterface","config","each","$this","data","test","TypeError","document","on","call","event","preventDefault","Constructor","noConflict"],"mappings":"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"}