{"version":3,"file":"scrollup.js","sources":["../src/o-scroll-up.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Boosted (v4.3.0): o-scroll-up.js\n * Licensed under MIT (https://github.com/Orange-OpenSource/Orange-Boosted-Bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME               = 'scrollup'\nconst VERSION            = '4.3.0'\nconst DATA_KEY           = 'bs.scrollup'\nconst EVENT_KEY          = `.${DATA_KEY}`\nconst DATA_API_KEY       = '.data-api'\nconst JQUERY_NO_CONFLICT = $.fn[NAME]\n\nconst SCROLLANIMATE      = 500\n\n\nconst Default = {\n  offset : 10,\n  method : 'auto',\n  target : ''\n}\n\nconst Event = {\n  SCROLL        : `scroll${EVENT_KEY}`,\n  CLICK_SCROLL  : `click${EVENT_KEY}`,\n  LOAD_DATA_API : `load${EVENT_KEY}${DATA_API_KEY}`\n}\n\nconst ClassName = {\n  SCROLL_TOP    : 'o-scroll-up'\n}\n\nconst Selector = {\n  SCROLL_TOP : '.o-scroll-up:not(.static)'\n}\n\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass ScrollUp {\n  constructor(element) {\n    this._element       = element\n    this._scrollElement = window\n\n    $(window).on(Event.SCROLL, $.proxy(this._process, this))\n    $(Selector.SCROLL_TOP).on(Event.CLICK_SCROLL, $.proxy(this._backToTop, this))\n\n    this._process()\n  }\n\n\n  // getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get Default() {\n    return Default\n  }\n\n\n  // public\n\n  dispose() {\n    $.removeData(this._element, DATA_KEY)\n    $(this._scrollElement).off(EVENT_KEY)\n\n    this._element       = null\n    this._scrollElement = null\n  }\n\n\n  // private\n\n  _process() {\n    if ($(this._scrollElement).scrollTop() > Number($(this._scrollElement).height())) {\n      $(Selector.SCROLL_TOP).show()\n    } else {\n      $(Selector.SCROLL_TOP).hide()\n    }\n  }\n\n  _clear() {\n    $(this._selector).filter(Selector.ACTIVE).removeClass(ClassName.ACTIVE)\n  }\n\n  _backToTop() {\n    if (typeof $.animate === 'function') {\n      $('html, body').animate({\n        scrollTop: 0\n      }, SCROLLANIMATE)\n    } else {\n      $('html, body').scrollTop(0)\n    }\n  }\n\n  // static\n\n  static _jQueryInterface() {\n    return this.each(function () {\n      let data = $(this).data(DATA_KEY)\n      if (!data) {\n        data = new ScrollUp(this)\n        $(this).data(DATA_KEY, data)\n      }\n    })\n  }\n}\n\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n$(window).on(Event.LOAD_DATA_API, () => {\n  const scrollUps = $.makeArray($(Selector.SCROLL_TOP))\n  for (let i = scrollUps.length; i--;) {\n    const $scrollup = $(scrollUps[i])\n    ScrollUp._jQueryInterface.call($scrollup, $scrollup.data())\n  }\n})\n\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME]             = ScrollUp._jQueryInterface\n$.fn[NAME].Constructor = ScrollUp\n$.fn[NAME].noConflict  = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return ScrollUp._jQueryInterface\n}\n\nexport default ScrollUp\n"],"names":["NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","$","fn","SCROLLANIMATE","Default","offset","method","target","Event","SCROLL","CLICK_SCROLL","LOAD_DATA_API","ClassName","SCROLL_TOP","Selector","ScrollUp","element","_element","_scrollElement","window","on","proxy","_process","_backToTop","dispose","removeData","off","scrollTop","Number","height","show","hide","_clear","_selector","filter","ACTIVE","removeClass","animate","_jQueryInterface","each","data","scrollUps","makeArray","i","length","$scrollup","call","Constructor","noConflict"],"mappings":"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"}