{"version":3,"file":"scrollup.js","sources":["../src/o-scroll-up.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Boosted (v4.4.1): o-scroll-up.js\n * Licensed under MIT (https://github.com/Orange-OpenSource/Orange-Boosted-Bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\nimport Util from './util'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME               = 'scrollup'\nconst VERSION            = '4.4.1'\nconst DATA_KEY           = 'bs.scrollup'\nconst EVENT_KEY          = `.${DATA_KEY}`\nconst DATA_API_KEY       = '.data-api'\nconst JQUERY_NO_CONFLICT = $.fn[NAME]\n\nconst SCROLLANIMATE      = 500\n\n\nconst Default = {\n  target : ''\n}\n\nconst DefaultType = {\n  target  : '(string|element)'\n}\n\nconst Event = {\n  SCROLL        : `scroll${EVENT_KEY}`,\n  CLICK_SCROLL  : `click${EVENT_KEY}`,\n  LOAD_DATA_API : `load${EVENT_KEY}${DATA_API_KEY}`\n}\n\nconst ClassName = {\n  SCROLL_TOP    : 'o-scroll-up'\n}\n\nconst Selector = {\n  SCROLL_TOP : '.o-scroll-up:not(.static)'\n}\n\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass ScrollUp {\n  constructor(element, config) {\n    this._element       = element\n    this._scrollElement = window\n    this._config        = this._getConfig(config)\n\n    $(window).on(Event.SCROLL, $.proxy(this._process, this))\n    $(Selector.SCROLL_TOP).on(Event.CLICK_SCROLL, $.proxy(this._backToTop, this))\n    $(this._element).addClass('is-fixed d-none')\n    this._process()\n  }\n\n\n  // getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  // public\n\n  dispose() {\n    $.removeData(this._element, DATA_KEY)\n    $(this._scrollElement).off(EVENT_KEY)\n\n    this._element       = null\n    this._scrollElement = null\n  }\n\n\n  // private\n  _getConfig(config) {\n    config = {\n      ...this.constructor.Default,\n      ...$(this._element).data(),\n      ...config\n    }\n\n    Util.typeCheckConfig(\n      NAME,\n      config,\n      this.constructor.DefaultType\n    )\n\n    return config\n  }\n\n  _process() {\n    $(Selector.SCROLL_TOP).toggleClass('d-none', $(this._scrollElement).scrollTop() < Number($(this._scrollElement).height()))\n  }\n\n  _clear() {\n    $(this._selector).filter(Selector.ACTIVE).removeClass(ClassName.ACTIVE)\n  }\n\n  _backToTop() {\n    // if target is defined scrollintoview\n    if (this._config.target) {\n      document.querySelector(this._config.target).scrollIntoView({\n        behavior: 'smooth'\n      })\n    } else if (typeof $.animate === 'function') {\n      $('html, body').animate({\n        scrollTop: 0\n      }, SCROLLANIMATE)\n    } else {\n      $('html, body').scrollTop(0)\n    }\n    // scrollIntoView({behavior: \"smooth\", block: \"end\", inline: \"nearest\"});\n  }\n\n  // static\n\n  static _jQueryInterface(config) {\n    return this.each(function () {\n      let data = $(this).data(DATA_KEY)\n      const _config = typeof config === 'object' ? config : null\n\n      if (!data) {\n        data = new ScrollUp(this, _config)\n        $(this).data(DATA_KEY, data)\n      }\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n        data[config]()\n      }\n    })\n  }\n}\n\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n$(window).on(Event.LOAD_DATA_API, () => {\n  const scrollUps = $.makeArray($(Selector.SCROLL_TOP))\n  for (let i = scrollUps.length; i--;) {\n    const $scrollup = $(scrollUps[i])\n    ScrollUp._jQueryInterface.call($scrollup, $scrollup.data())\n  }\n})\n\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME]             = ScrollUp._jQueryInterface\n$.fn[NAME].Constructor = ScrollUp\n$.fn[NAME].noConflict  = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return ScrollUp._jQueryInterface\n}\n\nexport default ScrollUp\n"],"names":["NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","$","fn","SCROLLANIMATE","Default","target","DefaultType","Event","SCROLL","CLICK_SCROLL","LOAD_DATA_API","ClassName","SCROLL_TOP","Selector","ScrollUp","element","config","_element","_scrollElement","window","_config","_getConfig","on","proxy","_process","_backToTop","addClass","dispose","removeData","off","constructor","data","Util","typeCheckConfig","toggleClass","scrollTop","Number","height","_clear","_selector","filter","ACTIVE","removeClass","document","querySelector","scrollIntoView","behavior","animate","_jQueryInterface","each","TypeError","scrollUps","makeArray","i","length","$scrollup","call","Constructor","noConflict"],"mappings":"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"}