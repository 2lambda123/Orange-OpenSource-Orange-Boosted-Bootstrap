{"version":3,"sources":["../src/o-megamenu.js"],"names":["MegaMenu","$","NAME","VERSION","DATA_KEY","JQUERY_NO_CONFLICT","fn","ARROW_LEFT_KEYCODE","ARROW_RIGHT_KEYCODE","ARROW_UP_KEYCODE","ARROW_DOWN_KEYCODE","Event","ClassName","TRANSITIONING","Dimension","Selector","MEGAMENU","ROOT_NAV","MEGAMENU_PANEL","MEGAMENU_NAV","NAV_MENU","NAV_ITEM","NAV_LINK","NAV_LINK_COLLAPSE","NAV_LINK_BACK","NAV_LINK_EXPANDED","element","config","_element","_config","_$navLinks","find","_$goForwardLinks","prev","_$goBackLinks","_$topCollapseMenus","_$navLinkCollapses","_addEventListeners","_addAriaAttributes","goTo","_initPosition","on","event","_goForward","_goBackward","_manageKeyDown","_collapseFocus","_handleCollapseToggle","$subNavs","attr","each","navId","Util","getUID","$thisNavToggler","$thisNav","$thisNavBackLink","$topMenu","closest","parent","goBackLabel","text","length","target","$target","first","position","parents","index","rootPosition","translatePercentage","$rootNav","addClass","collapse","show","not","css","height","setTimeout","trigger","removeClass","$thisTarget","test","tagName","which","next","e","$this","$thisCollapse","preventDefault","$targetNav","currentTranslatePos","parseInt","split","navWidth","width","currentTranslatePercentage","hasClass","hide","one","$targetNavToggler","_jQueryInterface","$element","data","Error","Constructor","noConflict","jQuery"],"mappings":"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","file":"o-megamenu.js","sourcesContent":["import Util from './util'\n\n/* eslint no-magic-numbers: [\"error\", { \"ignore\": [1,2] }] */\n\n/**\n * --------------------------------------------------------------------------\n * Boosted (v4.0.0-alpha.6): o-megamenu.js\n * Licensed under MIT (https://github.com/Orange-OpenSource/Orange-Boosted-Bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nconst MegaMenu = (($) => {\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME = 'megamenu';\n  const VERSION = '4.0.0-alpha.6';\n  const DATA_KEY = 'bs.megamenu';\n  const JQUERY_NO_CONFLICT = $.fn[NAME];\n  const ARROW_LEFT_KEYCODE = 37; // KeyboardEvent.which value for left arrow key\n  const ARROW_RIGHT_KEYCODE = 39; // KeyboardEvent.which value for right arrow key\n  const ARROW_UP_KEYCODE = 38; // KeyboardEvent.which value for up arrow key\n  const ARROW_DOWN_KEYCODE = 40; // KeyboardEvent.which value for down arrow key\n  // const POS_MODULO = 5;\n\n  const Event = {\n  }\n\n  const ClassName = {\n    TRANSITIONING: 'transitioning'\n  }\n\n  const Dimension = {\n  }\n\n  const Selector = {\n    MEGAMENU    : '.mega-menu',\n    ROOT_NAV : '.mega-menu > .navbar-nav',\n    MEGAMENU_PANEL : '.mega-menu-panel',\n    MEGAMENU_NAV : '.nav-link + .navbar-nav',\n    NAV_MENU : '.navbar-nav',\n    NAV_ITEM : '.nav-item',\n    NAV_LINK : '.nav-link',\n    NAV_LINK_COLLAPSE : '.nav-link[data-toggle=collapse]',\n    NAV_LINK_BACK : '.nav-link.back',\n    NAV_LINK_EXPANDED : '.nav-link[aria-expanded=true]'\n  }\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class MegaMenu {\n\n    constructor(element, config) {\n      this._element = element\n\t    this._config = config\n      this._$navLinks = $(this._element).find(Selector.NAV_LINK)\n      this._$goForwardLinks = $(this._element).find(Selector.MEGAMENU_NAV).prev(Selector.NAV_LINK)\n      this._$goBackLinks = $(this._element).find(Selector.NAV_LINK_BACK)\n      this._$topCollapseMenus = $(this._element).find(Selector.MEGAMENU_PANEL)\n      this._$navLinkCollapses = $(this._element).find(Selector.NAV_LINK_COLLAPSE)\n      this._addEventListeners()\n      this._addAriaAttributes(this._element)\n      this.goTo = this._initPosition\n    }\n\n    // getters\n\n    static get VERSION() {\n      return VERSION\n    }\n\n    // public\n\n    // private\n\n    _addEventListeners() {\n      this._$goForwardLinks.on('click', (event) => this._goForward(event))\n      this._$goBackLinks.on('click', (event) => this._goBackward(event))\n      this._$navLinks.on('keydown', (event) => this._manageKeyDown(event))\n      this._$topCollapseMenus.on('shown.bs.collapse', this._collapseFocus)\n      this._$navLinkCollapses.on('click', (event) => this._handleCollapseToggle(event))\n    }\n\n    _addAriaAttributes(element) {\n      const $subNavs = $(element).find('.nav-link + .navbar-nav')\n\n      $(element).attr('role', 'application')\n      $(element).find('> .navbar-nav').attr('role', 'menu')\n      $(element).find(Selector.MEGAMENU_PANEL).attr('role', 'menu')\n      $(element).find('.nav-link[data-toggle=collapse]').attr('role', 'menuitem')\n      $(element).find(Selector.NAV_LINK_BACK).attr({'aria-hidden': true})\n      $(element).find(Selector.NAV_ITEM).attr('role', 'presentation')\n\n      $subNavs.each(function() {\n        const navId = Util.getUID(NAME)\n        const $thisNavToggler = $(this).prev(Selector.NAV_LINK)\n        const $thisNav = $(this)\n        const $thisNavBackLink = $thisNav.find(Selector.NAV_LINK_BACK)\n        const $topMenu = $(this).closest(Selector.NAV_MENU).parent().closest(Selector.NAV_MENU).prev(Selector.NAV_LINK)\n        let goBackLabel = 'go back to ' + $topMenu.text() + ' menu'\n\n        if(!$topMenu.length) {\n          goBackLabel = 'go back to ' + $(this).closest(Selector.MEGAMENU_PANEL).prev(Selector.NAV_LINK).text() + ' menu'\n        }\n\n        $thisNav.attr({'id': navId, 'role': 'menu'})\n        $thisNavToggler.attr({'role': 'menuitem', 'aria-controls': navId, 'aria-expanded': false, 'aria-haspopup': true})\n        $thisNavBackLink.attr({'role': 'menuitem', 'aria-controls': navId, 'aria-label': goBackLabel})\n      })\n    }\n\n    _initPosition(target) {\n      if ($(target).length === 0) {\n        return\n      }\n\n      const $target = $(target).first();\n      const position = $target.parents().index(this._element)\n      const rootPosition = $('.mega-menu-panel .nav-link').first().parents().index($('.mega-menu'))\n      const translatePercentage = -(position - rootPosition) * 100 / 2\n      const $thisNav = $target.closest(Selector.NAV_MENU)\n      const $rootNav = $(Selector.ROOT_NAV)\n\n      $rootNav.addClass(ClassName.TRANSITIONING)\n\n      // open collapse\n      $target.closest(Selector.MEGAMENU_PANEL).collapse('show')\n\n      // show menu and hide other\n      $target.parents(Selector.NAV_MENU).show()\n\n      // set aria on parent links\n      $target.parents(Selector.NAV_ITEM).find('> .nav-link').not($target).attr({'tabindex': -1, 'aria-hidden': true, 'aria-expanded': true})\n\n      // translate to pos\n      $rootNav.css('transform', 'translateX(' + translatePercentage + '%)')\n\n      // adapt main collapse height to target height\n      $(this._element).height($thisNav.height())\n\n      //set focus on target link\n      setTimeout(function(){\n        //set focus on target link\n        $target.trigger('focus')\n\n        $rootNav.removeClass(ClassName.TRANSITIONING)\n      }, 1000)\n    };\n\n    _manageKeyDown(event) {\n      const $thisTarget = $(event.target)\n\n      // test key code\n      if (/input|textarea/i.test(event.target.tagName)) {\n        return\n      }\n\n      // proceed according to key code\n      switch(event.which){\n        case ARROW_LEFT_KEYCODE:\n          this._goBackward(event)\n          break\n        case ARROW_RIGHT_KEYCODE:\n          this._goForward(event)\n          break\n        case ARROW_UP_KEYCODE:\n          // focus prev nav link\n          $thisTarget.parent().prev().find('>.nav-link').not(Selector.NAV_LINK_BACK).trigger('focus')\n          break\n        case ARROW_DOWN_KEYCODE:\n          // focus next nav link\n          $thisTarget.parent().next().find('>.nav-link').trigger('focus')\n          break\n        default:\n          return\n      }\n    }\n\n    _collapseFocus(){\n      $(this).find(Selector.NAV_LINK).not(Selector.NAV_LINK_BACK).first().trigger('focus')\n    }\n\n    _handleCollapseToggle(e){\n      const $this = $(e.target)\n      const $thisCollapse = $($this.attr('href'))\n\n      this._$topCollapseMenus.not($thisCollapse).collapse('hide')\n    }\n\n    _goForward(e) {\n      e.preventDefault();\n      const $this = $(e.target)\n      const $thisNav = $this.closest(Selector.NAV_MENU)\n      const $targetNav =  $this.next(Selector.NAV_MENU)\n      const $rootNav = $(Selector.ROOT_NAV)\n      const $thisNavToggler = $this\n      const currentTranslatePos = parseInt($rootNav.css('transform').split(',')[4], 10)\n      const navWidth = $rootNav.width()\n      const currentTranslatePercentage = 100 * currentTranslatePos / navWidth\n\n      if(!$this.next(Selector.NAV_MENU).length || $rootNav.hasClass(ClassName.TRANSITIONING)) {\n          return false\n      }\n\n      $rootNav.addClass(ClassName.TRANSITIONING)\n\n      // hide all nav on same level\n      $thisNav.find(Selector.NAV_MENU).hide()\n\n      // show target navbar-nav\n      $targetNav.show()\n\n      // adapt main collapse height to target height\n      $(Selector.MEGAMENU).height($targetNav.height())\n\n      // make only visible elements focusable\n      if(currentTranslatePercentage === 0) {\n          $rootNav.find('>.nav-item .nav-link').attr({'tabindex': -1, 'aria-hidden': true})\n      }\n      $thisNav.find(Selector.NAV_LINK).attr({'tabindex': -1, 'aria-hidden': true})\n      $targetNav.find(Selector.NAV_LINK).attr({'tabindex': 0, 'aria-hidden': false})\n\n      // translate menu\n      $rootNav.css('transform', 'translateX('+(currentTranslatePercentage - 100)+'%)')\n\n      // focus on target nav first item\n      $rootNav.one('transitionend', function() {\n        $thisNavToggler.attr('aria-expanded', true)\n        $targetNav.find(Selector.NAV_LINK).not(Selector.NAV_LINK_BACK).first().trigger('focus')\n        $rootNav.removeClass(ClassName.TRANSITIONING)\n      })\n    }\n\n    _goBackward(e) {\n      e.preventDefault()\n\n      const $this = $(e.target)\n      const $thisNav = $this.closest(Selector.NAV_MENU)\n      const $targetNav = $thisNav.parent().closest(Selector.NAV_MENU)\n      const $rootNav = $(Selector.ROOT_NAV)\n      const $targetNavToggler = $targetNav.find(Selector.NAV_LINK_EXPANDED)\n      const $thisNavBackLink = $this\n      const currentTranslatePos = parseInt($rootNav.css('transform').split(',')[4], 10)\n      const navWidth = $rootNav.width()\n      const currentTranslatePercentage = 100 * currentTranslatePos / navWidth\n\n      if(currentTranslatePercentage === 0 || $rootNav.hasClass(ClassName.TRANSITIONING)) {\n          return false\n      }\n\n      $rootNav.addClass(ClassName.TRANSITIONING)\n\n      // make only visible elements focusable\n      $targetNav.find(Selector.NAV_LINK).attr({'tabindex': 0, 'aria-hidden': false})\n      if(currentTranslatePercentage === -100) {\n        // reset main collapse height\n        $(Selector.MEGAMENU).css('height', 'auto')\n        $rootNav.find('>.nav-item .nav-link').attr({'tabindex': 0, 'aria-hidden': false})\n      }\n\n      // translate menu\n      $rootNav.css('transform', 'translateX('+(currentTranslatePercentage + 100)+'%)')\n\n      // focus on target nav first item\n      $rootNav.one('transitionend', function() {\n        $targetNavToggler.attr('aria-expanded', false)\n        $targetNavToggler.trigger('focus')\n        $thisNav.hide()\n        $rootNav.removeClass(ClassName.TRANSITIONING)\n      })\n    }\n\n    // static\n\n    static _jQueryInterface(config) {\n      return this.each(function () {\n        const $element = $(this)\n        let data       = $element.data(DATA_KEY)\n\n        if (!data) {\n          data = new MegaMenu(this, config)\n          $element.data(DATA_KEY, data)\n        }\n\n        if(typeof config !== 'undefined' && config.length > 0) {\n          if (typeof config !== 'string' || !/^[.#].*/.test(config)) {\n            throw new Error(`Selector \"${config}\" is not supported`)\n          }\n\n          data.goTo(config)\n        }\n      })\n    }\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * jQuery\n   * ------------------------------------------------------------------------\n   */\n\n  $.fn[NAME]             = MegaMenu._jQueryInterface\n  $.fn[NAME].Constructor = MegaMenu\n  $.fn[NAME].noConflict  = function () {\n    $.fn[NAME] = JQUERY_NO_CONFLICT\n    return MegaMenu._jQueryInterface\n  }\n\n  return MegaMenu\n\n})(jQuery)\n\nexport default MegaMenu\n"]}