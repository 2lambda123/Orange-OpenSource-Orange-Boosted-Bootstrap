{"version":3,"sources":["../../src/o-priority-nav.js"],"names":["PriorityNav","$","NAME","VERSION","DATA_KEY","JQUERY_NO_CONFLICT","fn","RESIZE_DURATION","TAB_KEYCODE","Event","RESIZE","FOCUS","ClassName","PRIORITY","HIDE","RESIZING","Selector","NAV_ELEMENTS","FIRST_ELEMENT","PRIORITY_ELEMENT","MenuLabelDefault","MenuTemplate","MenuLabel","element","config","_element","_config","is","_$menu","find","first","_initMenu","_$allNavElements","_bindUIActions","_setupMenu","append","$allNavElements","firstPos","position","$wrappedElements","each","i","$elm","pos","top","add","eq","length","newSet","clone","addClass","attr","css","$item","prev","$itemDuplicate","prepend","_tearDown","empty","removeClass","window","on","setTimeout","e","which","target","dropdown","_jQueryInterface","$element","data","TypeError","Constructor","noConflict"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;;;;;AAOA,IAAMA,sCAAe,UAACC,CAAD,EAAO;AAAA;;AAC1B;;;;;AAMA,MAAMC,+BAAO,aAAP,CAAN;AACA,MAAMC,kCAAU,OAAV,CAAN;AACA,MAAMC,mCAAW,gBAAX,CAAN;AACA,MAAMC,6CAAqBJ,EAAEK,EAAF,CAAKJ,IAAL,CAArB,CAAN;AACA,MAAMK,0CAAkB,GAAlB,CAAN;AACA,MAAMC,sCAAe,CAAf,CAAN;AAEA,MAAMC,gCAAQ;AACZC,YAAQ,QADI;AAEZC,WAAO;AAFK,GAAR,CAAN;AAKA,MAAMC,oCAAY;AAChBC,cAAU,UADM;AAEhBC,UAAM,SAFU;AAGhBC,cAAU;AAHM,GAAZ,CAAN;AAMA,MAAMC,mCAAW;AACfC,kBAAc,2BADC;AAEfC,mBAAe,UAFA;AAGfC,sBAAkB;AAHH,GAAX,CAAN;AAMA,MAAMC,4CAAmB,MAAnB,CAAN;;AAEA,WAASC,YAAT,CAAsBC,SAAtB,EAAiC;AAAA;AAAA;AAC/B,8LAE6GA,SAF7G;AAMD;AAGD;;;;;;;AA3C0B,MAiDpBtB,WAjDoB;AAAA;AAAA;AAkDxB,yBAAYuB,OAAZ,EAAqBC,MAArB,EAA6B;AAAA;AAAA;AAC3B,WAAKC,QAAL,GAAgBF,OAAhB;AAD2B;AAE3B,WAAKG,OAAL,GAAeF,MAAf;AAF2B;;AAI3B,UAAIvB,EAAEsB,OAAF,EAAWI,EAAX,CAAc,IAAd,CAAJ,EAAyB;AAAA;AAAA;AACvB,aAAKC,MAAL,GAAc3B,EAAEsB,OAAF,CAAd;AACD,OAFD,MAEO;AAAA;AAAA;AACL,aAAKK,MAAL,GAAc3B,EAAEsB,OAAF,EAAWM,IAAX,CAAgB,IAAhB,EAAsBC,KAAtB,EAAd;AACD;;AAR0B;;AAS3B,WAAKC,SAAL;;AAT2B;AAU3B,WAAKC,gBAAL,GAAwB,KAAKJ,MAAL,CAAYC,IAAZ,CAAiBb,SAASC,YAA1B,CAAxB;AAV2B;;AAW3B,WAAKgB,cAAL;;AAX2B;;AAY3B,WAAKC,UAAL;AACD,KA/DuB,CAiExB;;;AAjEwB;;AAuExB;AAEA;AAzEwB,WA2ExBH,SA3EwB,wBA2EZ;AAAA;AACV,UAAIT,qCAAY,KAAKI,OAAjB,CAAJ;AADU;;AAGV,UAAI,OAAOJ,SAAP,KAAqB,WAAzB,EAAsC;AAAA;AAAA;AACpCA,oBAAYF,gBAAZ;AACD,OAFD;AAAA;AAAA,OAHU,CAOV;;;AAPU;;AAQV,WAAKQ,MAAL,CAAYO,MAAZ,CAAmBd,aAAaC,SAAb,CAAnB;AACD,KApFuB;;AAAA,WAsFxBY,UAtFwB,yBAsFX;AAAA;AACX,UAAME,2CAAkB,KAAKJ,gBAAvB,CAAN,CADW,CAGX;;AACA,UAAMK,oCAAW,KAAKT,MAAL,CAAYC,IAAZ,CAAiBb,SAASE,aAA1B,EAAyCoB,QAAzC,EAAX,CAAN,CAJW,CAMX;;AACA,UAAIC,4CAAmBtC,GAAnB,CAAJ,CAPW,CASX;;AACA,UAAI6B,iCAAQ,IAAR,CAAJ,CAVW,CAYX;;AAZW;;AAaX,WAAKE,gBAAL,CAAsBQ,IAAtB,CAA2B,UAAUC,CAAV,EAAa;AAAA;AACtC,YAAMC,gCAAOzC,EAAE,IAAF,CAAP,CAAN,CADsC,CAGtC;;AACA,YAAM0C,+BAAMD,KAAKJ,QAAL,EAAN,CAAN;AAJsC;;AAMtC,YAAIK,IAAIC,GAAJ,KAAYP,SAASO,GAAzB,EAA8B;AAAA;AAAA;AAC5B;AACAL,6BAAmBA,iBAAiBM,GAAjB,CAAqBH,IAArB,CAAnB,CAF4B,CAI5B;;AAJ4B;;AAK5B,cAAIZ,KAAJ,EAAW;AAAA;AAAA;AACTS,+BAAmBA,iBAAiBM,GAAjB,CAAqBT,gBAAgBU,EAAhB,CAAmBL,IAAI,CAAvB,CAArB,CAAnB;AADS;AAETX,oBAAQ,KAAR;AACD,WAHD;AAAA;AAAA;AAID,SATD;AAAA;AAAA;AAUD,OAhBD;;AAbW;;AA+BX,UAAIS,iBAAiBQ,MAArB,EAA6B;AAAA;AAC3B;AACA,YAAMC,kCAAST,iBAAiBU,KAAjB,EAAT,CAAN,CAF2B,CAI3B;;AAJ2B;AAK3BV,yBAAiBW,QAAjB,CAA0BtC,UAAUE,IAApC;AAL2B;AAM3ByB,yBAAiBV,IAAjB,CAAsB,WAAtB,EAAmCsB,IAAnC,CAAwC,UAAxC,EAAoD,CAAC,CAArD,EAN2B,CAQ3B;;AAR2B;;AAS3B,aAAKvB,MAAL,CAAYC,IAAZ,CAAiB,oBAAjB,EAAuCM,MAAvC,CAA8Ca,MAA9C,EAT2B,CAW3B;;;AAX2B;;AAY3B,aAAKpB,MAAL,CAAYC,IAAZ,CAAiB,eAAjB,EAAkCqB,QAAlC,CAA2C,mBAA3C,EAZ2B,CAc3B;;;AAd2B;;AAe3B,aAAKtB,MAAL,CAAYC,IAAZ,CAAiB,cAAjB,EAAiCuB,GAAjC,CAAqC,UAArC,EAAiD,SAAjD,EAf2B,CAiB3B;;;AAjB2B;;AAkB3B,YAAI,KAAKxB,MAAL,CAAYC,IAAZ,CAAiB,eAAjB,EAAkCS,QAAlC,GAA6CM,GAA7C,KAAqDP,SAASO,GAAlE,EAAuE;AAAA;AACrE,cAAMS,iCAAQpD,EAAE,KAAKwB,QAAP,EAAiBI,IAAjB,OAA0BjB,UAAUE,IAApC,EAA4CgB,KAA5C,GAAoDwB,IAApD,EAAR,CAAN;AACA,cAAMC,0CAAiBF,MAAMJ,KAAN,EAAjB,CAAN;AAFqE;AAIrEI,gBAAMH,QAAN,CAAetC,UAAUE,IAAzB;AAJqE;AAKrEuC,gBAAMxB,IAAN,CAAW,WAAX,EAAwBsB,IAAxB,CAA6B,UAA7B,EAAyC,CAAC,CAA1C;AALqE;;AAOrE,eAAKvB,MAAL,CAAYC,IAAZ,CAAiB,oBAAjB,EAAuC2B,OAAvC,CAA+CD,cAA/C;AACD,SARD;AAAA;AAAA;AASD,OA3BD;AAAA;AAAA,OA/BW,CA4DX;;;AA5DW;;AA6DX,WAAK3B,MAAL,CAAYC,IAAZ,CAAiB,eAAjB,EAAkCsB,IAAlC,CAAuC,aAAvC,EAAsD,IAAtD;AACD,KApJuB;;AAAA,WAsJxBM,SAtJwB,wBAsJZ;AAAA;AAAA;;AACV,WAAK7B,MAAL,CAAYC,IAAZ,CAAiB,oBAAjB,EAAuC6B,KAAvC;;AADU;;AAEV,WAAK9B,MAAL,CAAYC,IAAZ,CAAiB,eAAjB,EAAkC8B,WAAlC,CAA8C,mBAA9C;;AAFU;;AAGV,WAAK3B,gBAAL,CAAsB2B,WAAtB,CAAkC/C,UAAUE,IAA5C;;AAHU;;AAIV,WAAKkB,gBAAL,CAAsBH,IAAtB,CAA2B,WAA3B,EAAwCsB,IAAxC,CAA6C,UAA7C,EAAyD,CAAzD;AACD,KA3JuB;;AAAA,WA6JxBlB,cA7JwB,6BA6JP;AAAA;;AAAA;AAAA;AACfhC,QAAE2D,MAAF,EAAUC,EAAV,CAAapD,MAAMC,MAAnB,EAA2B,YAAM;AAAA;AAAA;;AAC/B,cAAKkB,MAAL,CAAYsB,QAAZ,CAAqBtC,UAAUG,QAA/B;;AAD+B;AAG/B+C,mBAAW,YAAM;AAAA;AAAA;;AACf,gBAAKL,SAAL;;AADe;;AAEf,gBAAKvB,UAAL;;AAFe;;AAGf,gBAAKN,MAAL,CAAY+B,WAAZ,CAAwB/C,UAAUG,QAAlC;AACD,SAJD,EAIGR,eAJH;AAKD,OARD;AADe;;AAWf,WAAKqB,MAAL,CAAYC,IAAZ,CAAiB,gCAAjB,EAAmDgC,EAAnD,CAAsD,OAAtD,EAA+D,UAACE,CAAD,EAAO;AAAA;AAAA;;AACpE,YAAIA,EAAEC,KAAF,KAAYxD,WAAhB,EAA6B;AAAA;AAAA;AAC3BP,YAAE8D,EAAEE,MAAJ,EAAYC,QAAZ,CAAqB,QAArB;AACD,SAFD;AAAA;AAAA;AAGD,OAJD;AAKD,KA7KuB,EA+KxB;;;AA/KwB,gBAiLjBC,gBAjLiB,6BAiLA3C,MAjLA,EAiLQ;AAAA;AAAA;AAC9B,aAAO,KAAKgB,IAAL,CAAU,YAAY;AAAA;AAC3B,YAAM4B,oCAAWnE,EAAE,IAAF,CAAX,CAAN;AAEA,YAAIoE,gCAAaD,SAASC,IAAT,CAAcjE,QAAd,CAAb,CAAJ;AAH2B;;AAK3B,YAAI,CAACiE,IAAL,EAAW;AAAA;AAAA;AACTA,iBAAO,IAAIrE,WAAJ,CAAgB,IAAhB,EAAsBwB,MAAtB,CAAP;AADS;AAET4C,mBAASC,IAAT,CAAcjE,QAAd,EAAwBiE,IAAxB;AACD,SAHD;AAAA;AAAA;;AAL2B;;AAU3B,YAAI,kCAAO7C,MAAP,KAAkB,WAAlB,gCAAiCA,MAAjC,CAAJ,EAA6C;AAAA;AAAA;;AAC3C,cAAI,OAAOA,MAAP,KAAkB,QAAtB,EAAgC;AAAA;AAAA;AAC9B,kBAAM,IAAI8C,SAAJ,CAAc,wCAAd,CAAN;AACD,WAFD;AAAA;AAAA;AAGD,SAJD;AAAA;AAAA;AAKD,OAfM,CAAP;AAgBD,KAlMuB;;AAAA;AAAA;AAAA,0BAmEH;AAAA;AAAA;AACnB,eAAOnE,OAAP;AACD;AArEuB;;AAAA;AAAA;AAqM1B;;;;;;;AArM0B;AA2M1BF,IAAEK,EAAF,CAAKJ,IAAL,IAAyBF,YAAYmE,gBAArC;AA3M0B;AA4M1BlE,IAAEK,EAAF,CAAKJ,IAAL,EAAWqE,WAAX,GAAyBvE,WAAzB;AA5M0B;;AA6M1BC,IAAEK,EAAF,CAAKJ,IAAL,EAAWsE,UAAX,GAAyB,YAAY;AAAA;AAAA;AACnCvE,MAAEK,EAAF,CAAKJ,IAAL,IAAaG,kBAAb;AADmC;AAEnC,WAAOL,YAAYmE,gBAAnB;AACD,GAHD;;AA7M0B;AAkN1B,SAAOnE,WAAP;AACD,CAnNmB,CAmNjBC,CAnNiB,CAAd,CAAN","sourcesContent":["import $ from 'jquery'\n\n/**\n * --------------------------------------------------------------------------\n * Boosted (v4.0.1): o-priority-nav.js\n * Licensed under MIT (https://github.com/Orange-OpenSource/Orange-Boosted-Bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nconst PriorityNav = (($) => {\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME = 'prioritynav'\n  const VERSION = '4.0.1'\n  const DATA_KEY = 'bs.prioritynav'\n  const JQUERY_NO_CONFLICT = $.fn[NAME]\n  const RESIZE_DURATION = 500\n  const TAB_KEYCODE  = 9\n\n  const Event = {\n    RESIZE: 'resize',\n    FOCUS: 'focus'\n  }\n\n  const ClassName = {\n    PRIORITY: 'priority',\n    HIDE: 'sr-only',\n    RESIZING: 'resizing'\n  }\n\n  const Selector = {\n    NAV_ELEMENTS: 'li:not(\\'.overflow-nav\\')',\n    FIRST_ELEMENT: 'li:first',\n    PRIORITY_ELEMENT: '.priority'\n  }\n\n  const MenuLabelDefault = 'More'\n\n  function MenuTemplate(MenuLabel) {\n    return `\n    <li class=\"overflow-nav nav-item dropdown\">\n        <a href=\"#\" class=\"dropdown-toggle nav-link\" data-toggle=\"dropdown\" role=\"button\" aria-haspopup=\"true\">${MenuLabel}</a>\n        <ul class=\"overflow-nav-list dropdown-menu dropdown-menu-right\"></ul>\n    </li>\n  `\n  }\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class PriorityNav {\n    constructor(element, config) {\n      this._element = element\n      this._config = config\n\n      if ($(element).is('ul')) {\n        this._$menu = $(element)\n      } else {\n        this._$menu = $(element).find('ul').first()\n      }\n      this._initMenu()\n      this._$allNavElements = this._$menu.find(Selector.NAV_ELEMENTS)\n      this._bindUIActions()\n      this._setupMenu()\n    }\n\n    // getters\n\n    static get VERSION() {\n      return VERSION\n    }\n\n    // public\n\n    // private\n\n    _initMenu() {\n      let MenuLabel = this._config\n\n      if (typeof MenuLabel === 'undefined') {\n        MenuLabel = MenuLabelDefault\n      }\n\n      // add menu template\n      this._$menu.append(MenuTemplate(MenuLabel))\n    }\n\n    _setupMenu() {\n      const $allNavElements = this._$allNavElements\n\n      // Checking top position of first item (sometimes changes)\n      const firstPos = this._$menu.find(Selector.FIRST_ELEMENT).position()\n\n      // Empty collection in which to put menu items to move\n      let $wrappedElements = $()\n\n      // Used to snag the previous menu item in addition to ones that have wrapped\n      let first = true\n\n      // Loop through all the nav items...\n      this._$allNavElements.each(function (i) {\n        const $elm = $(this)\n\n        // ...in which to find wrapped elements\n        const pos = $elm.position()\n\n        if (pos.top !== firstPos.top) {\n          // If element is wrapped, add it to set\n          $wrappedElements = $wrappedElements.add($elm)\n\n          // Add the previous one too, if first\n          if (first) {\n            $wrappedElements = $wrappedElements.add($allNavElements.eq(i - 1))\n            first = false\n          }\n        }\n      })\n\n      if ($wrappedElements.length) {\n        // Clone set before altering\n        const newSet = $wrappedElements.clone()\n\n        // Hide ones that we're moving\n        $wrappedElements.addClass(ClassName.HIDE)\n        $wrappedElements.find('.nav-link').attr('tabindex', -1)\n\n        // Add wrapped elements to dropdown\n        this._$menu.find('.overflow-nav-list').append(newSet)\n\n        // Show new menu\n        this._$menu.find('.overflow-nav').addClass('show-inline-block')\n\n        // Make overflow visible again so dropdown can be seen.\n        this._$menu.find('.o-nav-local').css('overflow', 'visible')\n\n        // Check if menu doesn't overflow after process\n        if (this._$menu.find('.overflow-nav').position().top !== firstPos.top) {\n          const $item = $(this._element).find(`.${ClassName.HIDE}`).first().prev()\n          const $itemDuplicate = $item.clone()\n\n          $item.addClass(ClassName.HIDE)\n          $item.find('.nav-link').attr('tabindex', -1)\n\n          this._$menu.find('.overflow-nav-list').prepend($itemDuplicate)\n        }\n      }\n\n      // hide menu from AT\n      this._$menu.find('.overflow-nav').attr('aria-hidden', true)\n    }\n\n    _tearDown() {\n      this._$menu.find('.overflow-nav-list').empty()\n      this._$menu.find('.overflow-nav').removeClass('show-inline-block')\n      this._$allNavElements.removeClass(ClassName.HIDE)\n      this._$allNavElements.find('.nav-link').attr('tabindex', 0)\n    }\n\n    _bindUIActions() {\n      $(window).on(Event.RESIZE, () => {\n        this._$menu.addClass(ClassName.RESIZING)\n\n        setTimeout(() => {\n          this._tearDown()\n          this._setupMenu()\n          this._$menu.removeClass(ClassName.RESIZING)\n        }, RESIZE_DURATION)\n      })\n\n      this._$menu.find('.overflow-nav .dropdown-toggle').on('keyup', (e) => {\n        if (e.which === TAB_KEYCODE) {\n          $(e.target).dropdown('toggle')\n        }\n      })\n    }\n\n    // static\n\n    static _jQueryInterface(config) {\n      return this.each(function () {\n        const $element = $(this)\n\n        let data       = $element.data(DATA_KEY)\n\n        if (!data) {\n          data = new PriorityNav(this, config)\n          $element.data(DATA_KEY, data)\n        }\n\n        if (typeof config !== 'undefined' && config) {\n          if (typeof config !== 'string') {\n            throw new TypeError('Priority nav label type must be string')\n          }\n        }\n      })\n    }\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * jQuery\n   * ------------------------------------------------------------------------\n   */\n\n  $.fn[NAME]             = PriorityNav._jQueryInterface\n  $.fn[NAME].Constructor = PriorityNav\n  $.fn[NAME].noConflict  = function () {\n    $.fn[NAME] = JQUERY_NO_CONFLICT\n    return PriorityNav._jQueryInterface\n  }\n\n  return PriorityNav\n})($)\n\nexport default PriorityNav\n"],"file":"o-priority-nav.js"}