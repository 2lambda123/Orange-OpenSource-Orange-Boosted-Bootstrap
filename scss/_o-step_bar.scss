//
// Orange stepbar
//

// inline svgs

$arrow-black-svg: "%3Csvg%0A%20%20%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%0A%20%20%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%0A%20%20%20width%3D%22450%22%0A%20%20%20height%3D%221200%22%0A%20%20%20viewBox%3D%220%200%20450%201200%22%3E%0A%20%20%20%3Cpath%0A%20%20%20%20%20%20%20style%3D%22fill%3A%23000000%3Bfill-rule%3Aevenodd%3Bstroke%3Anone%3Bstroke-width%3A1px%3Bstroke-linecap%3Abutt%3Bstroke-linejoin%3Amiter%3Bstroke-opacity%3A1%22%0A%20%20%20%20%20%20%20d%3D%22M%200%2C1200%20337.49996%2C600.86279%200%2C0%20M%200%2C1200%200%2C599.13714%20M%200%2C600.86279%200%2C0%22%2F%3E%0A%20%20%20%20%3Cpath%0A%20%20%20%20%20%20%20style%3D%22fill%3A%23ffffff%3Bfill-rule%3Aevenodd%3Bstroke%3Anone%3Bstroke-width%3A0%3Bstroke-linecap%3Abutt%3Bstroke-linejoin%3Amiter%3Bstroke-miterlimit%3A4%3Bstroke-dasharray%3Anone%3Bstroke-opacity%3A1%22%0A%20%20%20%20%20%20%20d%3D%22M%200%2C0%20112.50002%2C0%20450%2C600.86279%20112.50002%2C1200%200%2C1200%20337.49998%2C600.86279%200%2C0%22%2F%3E%0A%3C%2Fsvg%3E";

$arrow-orange-svg: "%3Csvg%0A%20%20%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%0A%20%20%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%0A%20%20%20width%3D%22450%22%0A%20%20%20height%3D%221200%22%0A%20%20%20viewBox%3D%220%200%20450%201200%22%3E%0A%20%20%20%3Cpath%0A%20%20%20%20%20%20%20style%3D%22fill%3A%23f16e00%3Bfill-rule%3Aevenodd%3Bstroke%3Anone%3Bstroke-width%3A1px%3Bstroke-linecap%3Abutt%3Bstroke-linejoin%3Amiter%3Bstroke-opacity%3A1%22%0A%20%20%20%20%20%20%20d%3D%22M%200%2C1200%20337.49996%2C600.86279%200%2C0%20M%200%2C1200%200%2C599.13714%20M%200%2C600.86279%200%2C0%22%2F%3E%0A%20%20%20%20%3Cpath%0A%20%20%20%20%20%20%20style%3D%22fill%3A%23ffffff%3Bfill-rule%3Aevenodd%3Bstroke%3Anone%3Bstroke-width%3A0%3Bstroke-linecap%3Abutt%3Bstroke-linejoin%3Amiter%3Bstroke-miterlimit%3A4%3Bstroke-dasharray%3Anone%3Bstroke-opacity%3A1%22%0A%20%20%20%20%20%20%20d%3D%22M%200%2C0%20112.50002%2C0%20450%2C600.86279%20112.50002%2C1200%200%2C1200%20337.49998%2C600.86279%200%2C0%22%2F%3E%0A%3C%2Fsvg%3E";

$arrow-grey-svg: "%3Csvg%0A%20%20%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%0A%20%20%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%0A%20%20%20width%3D%22450%22%0A%20%20%20height%3D%221200%22%0A%20%20%20viewBox%3D%220%200%20450%201200%22%3E%0A%20%20%20%3Cpath%0A%20%20%20%20%20%20%20style%3D%22fill%3A%23dddddd%3Bfill-rule%3Aevenodd%3Bstroke%3Anone%3Bstroke-width%3A1px%3Bstroke-linecap%3Abutt%3Bstroke-linejoin%3Amiter%3Bstroke-opacity%3A1%22%0A%20%20%20%20%20%20%20d%3D%22M%200%2C1200%20337.49996%2C600.86279%200%2C0%20M%200%2C1200%200%2C599.13714%20M%200%2C600.86279%200%2C0%22%2F%3E%0A%20%20%20%20%3Cpath%0A%20%20%20%20%20%20%20style%3D%22fill%3A%23ffffff%3Bfill-rule%3Aevenodd%3Bstroke%3Anone%3Bstroke-width%3A0%3Bstroke-linecap%3Abutt%3Bstroke-linejoin%3Amiter%3Bstroke-miterlimit%3A4%3Bstroke-dasharray%3Anone%3Bstroke-opacity%3A1%22%0A%20%20%20%20%20%20%20d%3D%22M%200%2C0%20112.50002%2C0%20450%2C600.86279%20112.50002%2C1200%200%2C1200%20337.49998%2C600.86279%200%2C0%22%2F%3E%0A%3C%2Fsvg%3E";

@mixin stepbar-arrow ($svg) {
  &::after {
    position: absolute;
    top: 0;
    right: -.9375rem;
    z-index: 500;
    display: block;
    width: calc(#{$o-stepbar-height} * #{$o-stepbar-arrow-ratio});
    height: $o-stepbar-height;
    content: "";
    background-image: url("data:image/svg+xml,#{$svg}");
    background-size: calc(#{$o-stepbar-height} * #{$o-stepbar-arrow-ratio}) $o-stepbar-height;
  }
}

.o-stepbar {
  &,
  ul {
    padding: 0;
    margin: 0;
    overflow: hidden;
  }

  .stepbar-item {
    @include stepbar-arrow($arrow-grey-svg);
    position: relative;
    float: left;
    padding: $padding-base-vertical $padding-base-horizontal;
    padding-left: calc(#{$o-stepbar-height} * #{$o-stepbar-arrow-ratio} + #{$padding-base-horizontal});
    font-weight: bold;
    color: $brand-orange-black;
    list-style: none;
    background-color: $gray-light-plus;

    &:first-child {
      padding-left: $padding-base-horizontal;
    }

    &:last-child {
      &::after {
        display: none;
      }
    }

    &.done {
      @include stepbar-arrow($arrow-black-svg);
      background-color: $brand-orange-black;
      .stepbar-link {
        color: $brand-orange-white;
      }
    }

    &.current {
      @include stepbar-arrow($arrow-orange-svg);
      background-color: $brand-orange;
      .stepbar-link {
        color: $brand-orange-white;
      }
    }

    @include media-breakpoint-down(sm) {
      &::after,
      &.done::after,
      &.current::after {
        display: none;
      }
    }

    .stepbar-link {
      text-decoration: none;

      .step-number::after {
        content: ".";
      }

      .step-number::after {
        @include media-breakpoint-down(sm) {
          display: none;
        }
      }

      .step-title {
        @include media-breakpoint-down(sm) {
          display: none;
        }
      }
    }

    @include media-breakpoint-down(sm) {
      &,
      &:first-child {
        padding: calc((#{$pagination-width} - #{$font-size-base}) / 2) 0;
      }

      width: $pagination-width;
      margin-right: .125rem;
      line-height: $font-size-base;
      text-align: center;
    }
  }

  @include media-breakpoint-down(sm) {
    .stepbar-header {
      margin-right: .625rem;
      font-weight: $brand-font-weight-bold;
      vertical-align: middle;
    }

    ul {
      display: inline-block;
      padding: 0;
      margin: 0;
      vertical-align: middle;
    }
  }
}

@include media-breakpoint-up(lg) {
  // one item
  .stepbar-item:nth-child(1):nth-last-child(1) {
    width: 100%;
  }

  // two items
  .stepbar-item:nth-child(1):nth-last-child(2),
  .stepbar-item:nth-child(2):nth-last-child(1) {
    width: 50%;
  }

  // three items
  .stepbar-item:nth-child(1):nth-last-child(3),
  .stepbar-item:nth-child(2):nth-last-child(2),
  .stepbar-item:nth-child(3):nth-last-child(1) {
    width: 33.3333%;
  }

  // four items
  .stepbar-item:nth-child(1):nth-last-child(4),
  .stepbar-item:nth-child(2):nth-last-child(3),
  .stepbar-item:nth-child(3):nth-last-child(2),
  .stepbar-item:nth-child(4):nth-last-child(1) {
    width: 25%;
  }

  // five items
  .stepbar-item:nth-child(1):nth-last-child(5),
  .stepbar-item:nth-child(2):nth-last-child(4),
  .stepbar-item:nth-child(3):nth-last-child(3),
  .stepbar-item:nth-child(4):nth-last-child(2),
  .stepbar-item:nth-child(5):nth-last-child(1) {
    width: 20%;
  }
}
